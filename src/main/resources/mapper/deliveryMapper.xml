<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.gamsung.scmproject.delivery.mapper.DeliveryMapper">

    <select id="selectDeliveryUnassignedOrderList"
            resultType="com.gamsung.scmproject.delivery.vo.DeliveryAssignVo">
    SELECT
        oi.id,
        oi.orderState,
        oi.state,
        s.deliveryReqDt,
        s.customerAddressFirst
    FROM
        orderInfo oi
    INNER JOIN statement s
    ON oi.statementId = s.id
    WHERE orderState = '1'
    AND deliveryReqDt = ADDDATE(CURDATE() ,1)
    </select>

    <insert id="insertAssignDelivery"
    parameterType="com.gamsung.scmproject.delivery.vo.DeliveryAssignVo">
    INSERT INTO deliveryInfo
    (
     orderId,
     tc,
     expectedDeliveryDt,
     state,
     deliveryStaffId
    )
    VALUES
    (
     #{id},
     #{tc},
     #{expectedDeliveryDt},
     #{state},
     #{deliveryStaffId}
    )
    </insert>

    <select id="selectDeliveryList"
            parameterType="com.gamsung.scmproject.delivery.vo.DeliveryInfoVo"
            resultType="com.gamsung.scmproject.delivery.vo.DeliveryInfoVo">
        SELECT * FROM delieryInfo
    </select>

</mapper>